import{A as c,i as k}from"./assets/vendor-b1ee5dfe.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const l="/juniors-js-project/assets/sprite-61614f66.svg",g=document.querySelector(".burger-menu"),d=document.querySelector(".mobile-menu"),h=g.querySelector("use"),u=document.body;g.addEventListener("click",()=>{d.classList.toggle("active"),d.classList.contains("active")?(u.style.overflow="hidden",h.setAttribute("xlink:href",`${l}#icon-x-close`)):(u.style.overflow="auto",h.setAttribute("xlink:href",`${l}#icon-burger-menu-icon`))});document.querySelector(".logo-text");document.querySelector(".burger-menu");const y=document.querySelector(".toggle-theme");y.addEventListener("click",function(){document.body.classList.toggle("dark-mode")});const a=document.getElementById("scrollUpButton");window.onscroll=function(){document.body.scrollTop>20||document.documentElement.scrollTop>20?a.style.display="block":a.style.display="none"};a.onclick=function(){window.scrollTo({top:0,behavior:"smooth"})};const C="/juniors-js-project/assets/error-bd282b8e.svg",p="/juniors-js-project/assets/caution-fce7ed33.svg",b="/juniors-js-project/assets/hello-28eb2f9b.svg",L="/juniors-js-project/assets/ok-2293f1ac.svg";class m{constructor(){this.BASE_URL="https://books-backend.p.goit.global/books",this.CATEGORY_LIST="/category-list",this.TOP_BOOKS="/top-books",this.URL_CATEGORY="/category?",this.iconError=C,this.iconCaution=p,this.iconHello=b,this.iconOk=L,this.errorNotification={title:"Error",message:"",backgroundColor:"#ff4e4e",icon:this.iconError}}async fetchCategoryList(){const e=this.BASE_URL+this.CATEGORY_LIST;try{return(await c.get(e)).data}catch(t){this.errorNotification.message=t,this.showNotification(this.errorNotification)}}async fetchTopBooks(){const e=this.BASE_URL+this.TOP_BOOKS;try{return(await c.get(e)).data}catch(t){this.errorNotification.message=t,this.showNotification(this.errorNotification)}}async fetchBookByID(e){const t=`${this.BASE_URL}/${e}`;try{return(await c.get(t)).data}catch(s){this.errorNotification.message=s,this.showNotification(this.errorNotification)}}async fetchBooksBySelectedCategory(e){const t=new URLSearchParams;t.append("category",e);const s=`${this.BASE_URL}${this.URL_CATEGORY}${t.toString()}`;try{return(await c.get(s)).data}catch(o){this.errorNotification.message=o,this.showNotification(this.errorNotification)}}showNotification({title:e="Hello",message:t="Type in your message, please",backgroundColor:s="white",icon:o=this.iconCaution}){return k.show({titleSize:"16px",title:`${e}`,message:`${t}`,messageSize:"16px",closeOnEscape:!0,position:"topRight",backgroundColor:`${s}`,iconUrl:`${o}`})}}class E{constructor(){this.booksAPI=new m,this.allCategoriesName="ALL CATEGORIES",this.bookClickCallback=null}addEventListenerBookClick(e){typeof e=="function"&&(this.bookClickCallback=e)}getBooksOfClickCategory(e){if(e===this.allCategoriesName){this.booksAPI.fetchTopBooks().then(t=>console.log(t)).catch(t=>console.log(t));return}this.booksAPI.fetchBooksBySelectedCategory(e).then(t=>{console.log(t),this.renderListBooks(t),this.addBookListeners()}).catch(t=>console.log(t))}renderListBooks(e){const t=this.itemsTemplate(e);document.getElementById("books-list").innerHTML=t}itemsTemplate(e){return e.map(this.itemTemplate).join("")}itemTemplate(e){const{book_image:t,author:s,_id:o,list_name:i}=e;return`
          <li class="book-item book-item-styles" data-id="${o}">
              <div class="wrap-item-img">
                  <img class="book-img" src="${t}" alt="" title=""/>
              </div>
              <div class="wrap-info">
                  <p class="info-item-name">
                      ${i}
                  </p>
                   <p class="info-item-author">
                      ${s}
                  </p>
              </div>
          </li>
      `}addBookListeners(){document.querySelectorAll(".book-item").forEach(t=>{t.addEventListener("click",s=>{this.handleBookClick(s)})})}handleBookClick(e){const t=e.currentTarget.dataset.id;this.bookClickCallback&&this.bookClickCallback(t)}}class B{constructor(){this.booksAPI=new m,this.allCategoriesName="ALL CATEGORIES";const e=document.querySelector(".home-all-categories");e.dataset.categoryName=this.allCategoriesName,e.addEventListener("click",this.handleCategoryClick),this.getCategories(),this.categoryClickCallback=null}addEventListenerCategoryClick(e){typeof e=="function"&&(this.categoryClickCallback=e)}getCategories(){this.booksAPI.fetchCategoryList().then(e=>{this.renderListCategory(e),this.addCategoriesListeners()}).catch(e=>console.log(e))}renderListCategory(e){const t=this.itemsTemplate(e);document.getElementById("categories-list").innerHTML=t}itemsTemplate(e){return e.map(this.itemTemplate).join("")}itemTemplate(e){const{list_name:t}=e;return`
              <li class="home-category-item item-style">
                  <div class="link-item" data-category-name="${t}">${t}</div>
              </li>
          `}addCategoriesListeners(){document.querySelectorAll(".link-item").forEach(t=>{t.addEventListener("click",s=>{this.handleCategoryClick(s)})})}handleCategoryClick(e){const t=e.currentTarget.dataset.categoryName;console.log(t),this.categoryClickCallback&&this.categoryClickCallback(t)}}const S=new B,f=new E;S.addEventListenerCategoryClick(T);function T(r){f.getBooksOfClickCategory(r)}f.addEventListenerBookClick(v);function v(r){console.log(r)}
//# sourceMappingURL=commonHelpers.js.map
